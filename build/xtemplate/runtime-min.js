/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Aug 1 14:00
*/
KISSY.add("xtemplate/runtime/commands",function(e){var g;return g={each:function(d,a){var b=a.params[0],c="",f;if(b){var h=[0,0].concat(d);if(e.isArray(b)){f=b.length;for(var i=0;i<f;i++)h[0]=b[i],h[1]={xcount:f,xindex:i},c+=a.fn(h)}else for(f in b)h[0]=b[f],h[1]={xkey:f},c+=a.fn(h)}else a.inverse&&(c=a.inverse(d));return c},"with":function(d,a){var b=a.params[0],c=[0].concat(d),f="";b?(c[0]=b,f=a.fn(c)):a.inverse&&(f=a.inverse(d));return f},"if":function(d,a){var b="";a.params[0]?a.fn&&(b=a.fn(d)):
a.inverse&&(b=a.inverse(d));return b},set:function(d,a){for(var b=d.length-1;0<=b;b--)if("object"==typeof d[b]){e.mix(d[b],a.hash);break}return""},include:function(d,a){var b=a.params,d=(a.hash?[a.hash]:[]).concat(d);if(!b||1!=b.length)return e[a.silent?"log":"error"]("include must has one param"),"";var c=this.config.name,b=b[0];if("."==b.charAt(0)){if("unspecified"==c)return"";b=e.Path.resolve(c,"../",b)}c=this.config.loader.call(this,b);a=e.merge(this.config);a.name=b;return this.invokeEngine(c,
d,a)},parse:function(d,a){return g.include.call(this,[],a)}}});
KISSY.add("xtemplate/runtime",function(e,g){function d(c,f){this.tpl=c;f=e.merge(b,f);f.commands=e.merge(f.commands,d.commands);f.utils=a;this.config=f}var a={getProperty:function(c,f,a){"."===c&&(c="this");var c=c.split("."),b=c.length,d=a||0,e,g,j,k=f.length;"root"==c[0]&&(d=k-1,c.shift(),b--);for(;d<k;d++){e=f[d];j=1;for(a=0;a<b;a++)if(g=c[a],"this"!==g){if("object"!=typeof e||!(g in e)){j=0;break}e=e[g]}if(j)return"function"==typeof e&&(e=e.call(f[0])),[e]}return!1}},b={silent:!0,name:"unspecified",
escapeHtml:!0,loader:function(c){var a="";e.use(c,{success:function(c,b){a=b},sync:1});if(!a)e[this.config.silent?"log":"error"]('template "'+c+'" does not exist, need to be required or used first!');return a}};d.prototype={constructor:d,invokeEngine:function(c,a,b){return(new this.constructor(c,b)).render(a,!0)},removeCommand:function(a){delete this.config.commands[a]},addCommand:function(a,b){this.config.commands[a]=b},render:function(a,b){b||(a=[a]);return this.tpl(a)}};e.mix(d,{commands:g,utils:a,
addCommand:function(a,b){g[a]=b},removeCommand:function(a){delete g[a]}});return d},{requires:["./runtime/commands"]});
