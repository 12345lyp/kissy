/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Aug 16 17:10
*/
KISSY.add("date/picker/picker-tpl",'<div class="{{getBaseCssClasses \'header\'}}">\n    <a id="ks-date-picker-previous-month-btn-{{id}}"\n       class="{{getBaseCssClasses \'prev-month-btn\'}}"\n       href="#"\n       role="button"\n       title="{{previousMonthLabel}}"\n       hidefocus="on">\n    </a>\n\n    <a class="{{getBaseCssClasses \'month-select\'}}"\n       role="button"\n       href="#"\n       hidefocus="on"\n       title="{{monthSelectLabel}}"\n       id="ks-date-picker-month-select-{{id}}">\n        <span id="ks-date-picker-month-select-content-{{id}}">{{monthYearLabel}}</span>\n        <span class="{{getBaseCssClasses \'month-select-arrow\'}}">x</span>\n    </a>\n\n    <a id="ks-date-picker-next-month-btn-{{id}}"\n       class="{{getBaseCssClasses \'next-month-btn\'}}"\n       href="#"\n       role="button"\n       title="{{nextMonthLabel}}"\n       hidefocus="on">\n    </a>\n</div>\n<div class="{{getBaseCssClasses \'body\'}}">\n    <table class="{{getBaseCssClasses \'table\'}}" cellspacing="0" role="grid">\n        <thead>\n        <tr role="row">\n            {{#each weekdays}}\n            <th role="columnheader" title="{{.}}" class="{{getBaseCssClasses \'column-header\'}}">\n                <span class="{{getBaseCssClasses \'column-header-inner\'}}">\n                    {{veryShortWeekdays[xindex]}}\n                </span>\n            </th>\n            {{/each}}\n        </tr>\n        </thead>\n        <tbody id="ks-date-picker-tbody-{{id}}">\n        {{{renderDates}}}\n        </tbody>\n    </table>\n</div>\n{{#if showToday}}\n<div class="{{getBaseCssClasses \'footer\'}}">\n    <a class="{{getBaseCssClasses \'today-btn\'}}"\n       role="button"\n       hidefocus="on"\n       href="#"\n       id="ks-date-picker-today-btn-{{id}}"\n       title="{{todayTimeLabel}}">{{todayLabel}}</a>\n</div>\n{{/if}}');
KISSY.add("date/picker/render",function(j,k,d,o,m){function n(a,b){return a.get(d.YEAR)==b.get(d.YEAR)&&a.get(d.MONTH)==b.get(d.MONTH)&&a.get(d.DAY_OF_MONTH)==b.get(d.DAY_OF_MONTH)}function l(){return this.config.view.renderDates()}return k.getDefaultRender().extend({getMonthYearLabel:function(){var a=this.control,b=a.get("locale"),a=a.get("value"),f=a.getLocale();return(new o(b.monthYearFormat,f)).format(a)},getTodayTimeLabel:function(){var a=this.control,b=a.get("locale"),f=a.get("value"),a=f.getLocale(),
f=f.clone();f.setTimeInMillis(j.now());return(new o(b.dateFormat,a)).format(f)},beforeCreateDom:function(a,b,f){var c=this.control,d=c.get("locale"),g=c.get("value"),c=g.getLocale();j.mix(b,{previousMonthBtn:"#ks-date-picker-previous-month-btn-{id}",monthSelectEl:"#ks-date-picker-month-select-{id}",monthSelectContentEl:"#ks-date-picker-month-select-content-{id}",nextMonthBtn:"#ks-date-picker-next-month-btn-{id}",todayBtnEl:"#ks-date-picker-today-btn-{id}",tbodyEl:"#ks-date-picker-tbody-{id}"});for(var b=
[],e=[],g=g.getFirstDayOfWeek(),i=0;7>i;i++){var p=(g+i)%7;b[i]=d.veryShortWeekdays[p];e[i]=c.weekdays[p]}j.mix(a,{monthYearLabel:this.getMonthYearLabel(),previousMonthLabel:d.previousMonth,monthSelectLabel:d.monthSelect,nextMonthLabel:d.nextMonth,weekdays:e,veryShortWeekdays:b,todayLabel:d.today,todayTimeLabel:this.getTodayTimeLabel()});f.renderDates=l},renderDates:function(){var a,b,f=[],c,h=this.control,g=h.get("locale"),e=h.get("value"),i=e.clone(),p=this.getBaseCssClass("cell"),r=this.getBaseCssClass("date"),
k=h.get("dateRender"),l=h.get("disabledDate"),m=e.getLocale(),g=new o(g.dateFormat,m),m=this.getBaseCssClass("today"),v=this.getBaseCssClass("selected-day"),w=this.getBaseCssClass("last-month-cell"),x=this.getBaseCssClass("next-month-btn-day"),y=this.getBaseCssClass("disabled-cell");i.setTimeInMillis(j.now());b=e.clone();b.set(e.get(d.YEAR),e.get(d.MONTH),1);a=(b.get(d.DAY_OF_WEEK)+7-e.getFirstDayOfWeek())%7;var t=b.clone();t.add(d.DAY_OF_MONTH,-a);var s=0;for(a=0;6>a;a++){f[a]=[];for(b=0;7>b;b++)c=
t,s&&(c=c.clone(),c.add(d.DAY_OF_MONTH,s)),f[a][b]=c,s++}t="";for(a=0;6>a;a++){s='<tr role="row">';for(b=0;7>b;b++){c=f[a][b];var q=p;n(c,i)&&(q+=" "+m);n(c,e)&&(q+=" "+v);(c.get(d.YEAR)<e.get(d.YEAR)||c.get(d.YEAR)==e.get(d.YEAR)&&c.get(d.MONTH)<e.get(d.MONTH))&&(q+=" "+w);(c.get(d.YEAR)>e.get(d.YEAR)||c.get(d.YEAR)==e.get(d.YEAR)&&c.get(d.MONTH)>e.get(d.MONTH))&&(q+=" "+x);l&&l(c,e)&&(q+=" "+y);var u="";if(!k||!(u=k(c,e)))u=j.substitute('<a hidefocus="on" class="{cls}" href="#">{content}</a>',{cls:r,
content:c.get(d.DAY_OF_MONTH)});s+=j.substitute('<td role="gridcell" title="{title}" class="{cls}">{content}</td>',{cls:q,title:g.format(c),content:u})}t+=s+"</tr>"}h.dateTable=f;return t},_onSetValue:function(){var a=this.control,b=a.get("tbodyEl"),d=a.get("monthSelectContentEl"),a=a.get("todayBtnEl");d.html(this.getMonthYearLabel());a.attr("title",this.getTodayTimeLabel());b.html(this.renderDates())}},{name:"date-picker-render",ATTRS:{contentTpl:{value:m}}})},{requires:["component/control","date/gregorian",
"date/format","./picker-tpl"]});KISSY.add("date/picker/month-panel/months-tpl",'{{#each months}}\n<tr role="row">\n    {{#each months[xindex]}}\n    <td role="gridcell"\n        title="{{title}}"\n        class="{{getBaseCssClasses \'cell\'}}\n        {{#if month===value}}\n        {{getBaseCssClasses \'selected-cell\'}}\n        {{/if}}\n        ">\n        <a hidefocus="on"\n           href="#"\n           class="{{getBaseCssClasses \'month\'}}">\n            {{content}}\n        </a>\n    </td>\n    {{/each}}\n</tr>\n{{/each}}');
KISSY.add("date/picker/month-panel/month-panel-tpl",'<div class="{{getBaseCssClasses \'header\'}}">\n    <a id="ks-date-picker-month-panel-previous-year-btn-{{id}}"\n       class="{{getBaseCssClasses \'prev-year-btn\'}}"\n       href="#"\n       role="button"\n       title="{{previousYearLabel}}"\n       hidefocus="on">\n    </a>\n\n\n        <a class="{{getBaseCssClasses \'year-select\'}}"\n           role="button"\n           href="#"\n           hidefocus="on"\n           title="{{yearSelectLabel}}"\n           id="ks-date-picker-month-panel-year-select-{{id}}">\n            <span id="ks-date-picker-month-panel-year-select-content-{{id}}">{{year}}</span>\n            <span class="{{getBaseCssClasses \'year-select-arrow\'}}">x</span>\n        </a>\n\n    <a id="ks-date-picker-month-panel-next-year-btn-{{id}}"\n       class="{{getBaseCssClasses \'next-year-btn\'}}"\n       href="#"\n       role="button"\n       title="{{nextYearLabel}}"\n       hidefocus="on">\n    </a>\n</div>\n<div class="{{getBaseCssClasses \'body\'}}">\n    <table class="{{getBaseCssClasses \'table\'}}" cellspacing="0" role="grid">\n        <tbody id="ks-date-picker-month-panel-tbody-{{id}}">\n        {{{include "date/picker/month-panel/months-tpl"}}}\n        </tbody>\n    </table>\n</div>');
KISSY.add("date/picker/month-panel/render",function(j,k,d,o,m,n){function l(a){for(var b=a.get("value"),f=b.get(d.MONTH),c=b.clone(),h=a.get("locale").monthYearFormat,g=b.getLocale(),h=new o(h,g),e=[],g=g.shortMonths,i=0,p=0;3>p;p++){e[p]=[];for(var r=0;4>r;r++)c.set(d.MONTH,i),e[p][r]={value:i,content:g[i],title:h.format(c)},i++}j.mix(a.view.renderData,{months:e,year:b.get(d.YEAR),month:f});return a.months=e}return k.getDefaultRender().extend({beforeCreateDom:function(a,b){var d=this.control,c=d.get("locale");
j.mix(a,{yearSelectLabel:c.yearSelect,previousYearLabel:c.previousYear,nextYearLabel:c.nextYear});j.mix(b,{tbodyEl:"#ks-date-picker-month-panel-tbody-{id}",previousYearBtn:"#ks-date-picker-month-panel-previous-year-btn-{id}",yearSelectEl:"#ks-date-picker-month-panel-year-select-{id}",yearSelectContentEl:"#ks-date-picker-month-panel-year-select-content-{id}",nextYearBtn:"#ks-date-picker-month-panel-next-year-btn-{id}"});l(d)},_onSetValue:function(a){var b=this.control;l(b);b.get("tbodyEl").html(this.renderTpl(m));
b.get("yearSelectContentEl").html(a.get(d.YEAR))}},{ATTRS:{contentTpl:{value:n}}})},{requires:["component/control","date/gregorian","date/format","./months-tpl","./month-panel-tpl"]});KISSY.add("date/picker/year-panel/years-tpl",'{{#each years}}\n<tr role="row">\n    {{#each years[xindex]}}\n    <td role="gridcell"\n        title="{{title}}"\n        class="{{getBaseCssClasses \'cell\'}}\n        {{#if content===year}}\n         {{getBaseCssClasses \'selected-cell\'}}\n        {{/if}}\n        {{#if content<startYear}}\n         {{getBaseCssClasses \'last-decade-cell\'}}\n        {{/if}}\n        {{#if content>endYear}}\n         {{getBaseCssClasses \'next-decade-cell\'}}\n        {{/if}}\n        ">\n        <a hidefocus="on"\n           href="#"\n           class="{{getBaseCssClasses \'year\'}}">\n            {{content}}\n        </a>\n    </td>\n    {{/each}}\n</tr>\n{{/each}}');
KISSY.add("date/picker/year-panel/year-panel-tpl",'<div class="{{getBaseCssClasses \'header\'}}">\n    <a id="ks-date-picker-year-panel-previous-decade-btn-{{id}}"\n       class="{{getBaseCssClasses \'prev-decade-btn\'}}"\n       href="#"\n       role="button"\n       title="{{previousDecadeLabel}}"\n       hidefocus="on">\n    </a>\n\n    <a class="{{getBaseCssClasses \'decade-select\'}}"\n       role="button"\n       href="#"\n       hidefocus="on"\n       title="{{decadeSelectLabel}}"\n       id="ks-date-picker-year-panel-decade-select-{{id}}">\n            <span id="ks-date-picker-year-panel-decade-select-content-{{id}}">\n                {{startYear}}-{{endYear}}\n            </span>\n        <span class="{{getBaseCssClasses \'decade-select-arrow\'}}">x</span>\n    </a>\n\n    <a id="ks-date-picker-year-panel-next-decade-btn-{{id}}"\n       class="{{getBaseCssClasses \'next-decade-btn\'}}"\n       href="#"\n       role="button"\n       title="{{nextDecadeLabel}}"\n       hidefocus="on">\n    </a>\n</div>\n<div class="{{getBaseCssClasses \'body\'}}">\n    <table class="{{getBaseCssClasses \'table\'}}" cellspacing="0" role="grid">\n        <tbody id="ks-date-picker-year-panel-tbody-{{id}}">\n        {{{include "date/picker/year-panel/years-tpl"}}}\n        </tbody>\n    </table>\n</div>');
KISSY.add("date/picker/year-panel/render",function(j,k,d,o,m,n){function l(a){for(var b=a.get("value"),f=b.get(d.YEAR),f=10*parseInt(f/10)-1,c=b.clone(),h=a.get("locale").yearFormat,b=b.getLocale(),b=new o(h,b),h=[],g=0,e=0;3>e;e++){h[e]=[];for(var i=0;4>i;i++)c.set(d.YEAR,f+g),h[e][i]={content:f+g,title:b.format(c)},g++}return a.years=h}return k.getDefaultRender().extend({beforeCreateDom:function(a,b){var f=this.control,c=f.get("value"),h=c.get(d.YEAR),h=10*parseInt(h/10),g=h+9,e=f.get("locale");
j.mix(a,{decadeSelectLabel:e.decadeSelect,years:l(f),startYear:h,endYear:g,year:c.get(d.YEAR),previousDecadeLabel:e.previousDecade,nextDecadeLabel:e.nextDecade});j.mix(b,{tbodyEl:"#ks-date-picker-year-panel-tbody-{id}",previousDecadeBtn:"#ks-date-picker-year-panel-previous-decade-btn-{id}",decadeSelectEl:"#ks-date-picker-year-panel-decade-select-{id}",decadeSelectContentEl:"#ks-date-picker-year-panel-decade-select-content-{id}",nextDecadeBtn:"#ks-date-picker-year-panel-next-decade-btn-{id}"})},_onSetValue:function(a){var b=
this.control,f=a.get(d.YEAR),f=10*parseInt(f/10),c=f+9;j.mix(this.renderData,{startYear:f,endYear:c,years:l(b),year:a.get(d.YEAR)});b.get("tbodyEl").html(this.renderTpl(m));b.get("decadeSelectContentEl").html(f+"-"+c)}},{ATTRS:{contentTpl:{value:n}}})},{requires:["component/control","date/gregorian","date/format","./years-tpl","./year-panel-tpl"]});KISSY.add("date/picker/decade-panel/decades-tpl",'{{#each decades}}\n<tr role="row">\n    {{#each decades[xindex]}}\n    <td role="gridcell"\n        class="{{getBaseCssClasses \'cell\'}}\n        {{#if startDecade<=year&&year<=endDecade}}\n         {{getBaseCssClasses \'selected-cell\'}}\n        {{/if}}\n        {{#if startDecade<startYear}}\n         {{getBaseCssClasses \'last-century-cell\'}}\n        {{/if}}\n        {{#if endDecade>endYear}}\n         {{getBaseCssClasses \'next-century-cell\'}}\n        {{/if}}\n        ">\n        <a hidefocus="on"\n           href="#"\n           class="{{getBaseCssClasses \'decade\'}}">\n            {{startDecade}}-{{endDecade}}\n        </a>\n    </td>\n    {{/each}}\n</tr>\n{{/each}}');
KISSY.add("date/picker/decade-panel/decade-panel-tpl",'<div class="{{getBaseCssClasses \'header\'}}">\n    <a id="ks-date-picker-decade-panel-previous-century-btn-{{id}}"\n       class="{{getBaseCssClasses \'prev-century-btn\'}}"\n       href="#"\n       role="button"\n       title="{{previousCenturyLabel}}"\n       hidefocus="on">\n    </a>\n    <div class="{{getBaseCssClasses \'century\'}}"\n         id="ks-date-picker-decade-panel-century-{{id}}">\n                {{startYear}}-{{endYear}}\n    </div>\n    <a id="ks-date-picker-decade-panel-next-century-btn-{{id}}"\n       class="{{getBaseCssClasses \'next-century-btn\'}}"\n       href="#"\n       role="button"\n       title="{{nextCenturyLabel}}"\n       hidefocus="on">\n    </a>\n</div>\n<div class="{{getBaseCssClasses \'body\'}}">\n    <table class="{{getBaseCssClasses \'table\'}}" cellspacing="0" role="grid">\n        <tbody id="ks-date-picker-decade-panel-tbody-{{id}}">\n        {{{include "date/picker/decade-panel/decades-tpl"}}}\n        </tbody>\n    </table>\n</div>');
KISSY.add("date/picker/decade-panel/render",function(j,k,d,o,m,n){function l(a,b){var f=a.get("value").get(d.YEAR),c=100*parseInt(f/100),h=c-10,g=c+99;a.get("locale");for(var e=[],i=0,p=0;3>p;p++){e[p]=[];for(var r=0;4>r;r++)e[p][r]={startDecade:h+10*i,endDecade:h+10*i+9},i++}a.decades=e;j.mix(b.renderData,{startYear:c,endYear:g,year:f,decades:e})}return k.getDefaultRender().extend({beforeCreateDom:function(a,b){var d=this.control;d.get("value");var c=d.get("locale");l(d,this);j.mix(a,{previousCenturyLabel:c.previousCentury,
nextCenturyLabel:c.nextCentury});j.mix(b,{tbodyEl:"#ks-date-picker-decade-panel-tbody-{id}",previousCenturyBtn:"#ks-date-picker-decade-panel-previous-century-btn-{id}",centuryEl:"#ks-date-picker-decade-panel-century-{id}",nextCenturyBtn:"#ks-date-picker-decade-panel-next-century-btn-{id}"})},_onSetValue:function(){var a=this.control;l(a,this);var d=this.renderData.startYear,f=this.renderData.endYear;a.get("tbodyEl").html(this.renderTpl(m));a.get("centuryEl").html(d+"-"+f)}},{ATTRS:{contentTpl:{value:n}}})},
{requires:["component/control","date/gregorian","date/format","./decades-tpl","./decade-panel-tpl"]});
KISSY.add("date/picker/decade-panel/control",function(j,k,d,o,m){function n(a,b){var c=a.get("value").clone();c.add(d.YEAR,b);a.set("value",c)}function l(a){a.preventDefault();n(this,100)}function a(a){a.preventDefault();n(this,-100)}function b(a){a.preventDefault();var a=c(a.currentTarget),b=a.parent(),a=a.index(),b=b.index(),e=this.get("value").clone(),i=e.get(d.YEAR)%10;e.set(d.YEAR,this.decades[b][a].startDecade+i);this.set("value",e);this.fire("select",{value:e})}var f=k.Gesture.tap,c=k.all;
return o.extend({bindUI:function(){this.get("nextCenturyBtn").on(f,l,this);this.get("previousCenturyBtn").on(f,a,this);this.get("tbodyEl").delegate(f,"."+this.view.getBaseCssClass("cell"),b,this)}},{xclass:"date-picker-decade-panel",ATTRS:{value:{view:1},xrender:{value:m}}})},{requires:["node","date/gregorian","component/control","./render"]});
KISSY.add("date/picker/year-panel/control",function(j,k,d,o,m,n){function l(a,b){var c=a.get("value").clone();c.add(d.YEAR,b);a.set("value",c)}function a(a){a.preventDefault();l(this,10)}function b(a){a.preventDefault();l(this,-10)}function f(a){a.preventDefault();var a=e(a.currentTarget),b=a.parent(),a=a.index(),b=b.index(),c=this.get("value").clone();c.set(d.YEAR,this.years[b][a].content);this.set("value",c);this.fire("select",{value:c})}function c(a){a.preventDefault();a=this.get("decadePanel");
a.set("value",this.get("value"));a.show()}function h(a){this.set("value",a.value);this.get("decadePanel").hide()}var g=k.Gesture.tap,e=k.all;return o.extend({bindUI:function(){this.get("nextDecadeBtn").on(g,a,this);this.get("previousDecadeBtn").on(g,b,this);this.get("tbodyEl").delegate(g,"."+this.view.getBaseCssClass("cell"),f,this);this.get("decadeSelectEl").on(g,c,this)}},{xclass:"date-picker-year-panel",ATTRS:{value:{view:1},decadePanel:{valueFn:function(){var a=new n({locale:this.get("locale"),
render:this.get("el")});a.on("select",h,this);return a}},xrender:{value:m}}})},{requires:["node","date/gregorian","component/control","./render","../decade-panel/control"]});
KISSY.add("date/picker/month-panel/control",function(j,k,d,o,m,n){function l(a,b){var c=a.get("value").clone();c.add(d.YEAR,b);a.set("value",c)}function a(a){a.preventDefault();l(this,1)}function b(a){a.preventDefault();l(this,-1)}function f(a){a.preventDefault();var a=e(a.currentTarget),b=a.parent(),a=a.index(),b=b.index(),c=this.get("value").clone();c.set(d.MONTH,4*b+a);this.fire("select",{value:c})}function c(a){a.preventDefault();a=this.get("yearPanel");a.set("value",this.get("value"));a.show()}
function h(a){this.set("value",a.value);this.get("yearPanel").hide()}var g=k.Gesture.tap,e=k.all;return o.extend({bindUI:function(){this.get("nextYearBtn").on(g,a,this);this.get("previousYearBtn").on(g,b,this);this.get("tbodyEl").delegate(g,"."+this.view.getBaseCssClass("cell"),f,this);this.get("yearSelectEl").on(g,c,this)}},{xclass:"date-picker-month-panel",ATTRS:{value:{view:1},yearPanel:{valueFn:function(){var a=new n({locale:this.get("locale"),render:this.get("el")});a.on("select",h,this);return a}},
xrender:{value:m}}})},{requires:["node","date/gregorian","component/control","./render","../year-panel/control"]});
KISSY.add("date/picker/control",function(j,k,d,o,m,n,l){function a(a,b){var c=a.get("value").clone();c.add(d.MONTH,b);a.set("value",c)}function b(b){b.preventDefault();a(this,1)}function f(b){b.preventDefault();a(this,-1)}function c(a){a.preventDefault();var b=p(a.currentTarget);b.hasClass(this.view.getBaseCssClass("disabled-cell"))||(a=b.parent(),b=b.index(),this.set("value",this.dateTable[a.index()][b]))}function h(a){a.preventDefault();a=this.get("monthPanel");a.set("value",this.get("value"));
a.show()}function g(a){this.set("value",a.value);this.get("monthPanel").hide()}function e(a){a.preventDefault();a=this.get("value").clone();a.setTimeInMillis(j.now());this.set("value",a)}var i=k.Gesture.tap,p=k.all;return m.extend({bindUI:function(){this.get("nextMonthBtn").on(i,b,this);this.get("previousMonthBtn").on(i,f,this);this.get("tbodyEl").delegate(i,"."+this.view.getBaseCssClass("cell"),c,this);this.get("monthSelectEl").on(i,h,this);this.get("todayBtnEl").on(i,e,this)}},{xclass:"date-picker",
ATTRS:{value:{view:1,valueFn:function(){var a=new d;a.setTimeInMillis(j.now());return a}},previousMonthBtn:{},monthSelectEl:{},monthPanel:{valueFn:function(){var a=new l({locale:this.get("locale"),render:this.get("el")});a.on("select",g,this);return a}},nextMonthBtn:{},tbodyEl:{},todayBtnEl:{},dateRender:{},disabledDate:{},locale:{value:o},showToday:{view:1,value:!0},xrender:{value:n}}})},{requires:"node,date/gregorian,i18n!date/picker,component/control,./render,./month-panel/control".split(",")});
KISSY.add("date/picker",function(j,k){return k},{requires:["./picker/control"]});
