/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Aug 16 13:32
*/
KISSY.add("date/picker/picker-tpl",'<div class="{{getBaseCssClasses \'header\'}}">\n    <a id="ks-date-picker-previous-month-btn-{{id}}"\n       class="{{getBaseCssClasses \'prev-month-btn\'}}"\n       href="#"\n       role="button"\n       title="{{previousMonthLabel}}"\n       hidefocus="on">\n    </a>\n\n    <a class="{{getBaseCssClasses \'month-select\'}}"\n       role="button"\n       href="#"\n       hidefocus="on"\n       title="{{monthSelectLabel}}"\n       id="ks-date-picker-month-select-{{id}}">\n        <span id="ks-date-picker-month-select-content-{{id}}">{{monthYearLabel}}</span>\n        <span class="{{getBaseCssClasses \'month-select-arrow\'}}">x</span>\n    </a>\n\n    <a id="ks-date-picker-next-month-btn-{{id}}"\n       class="{{getBaseCssClasses \'next-month-btn\'}}"\n       href="#"\n       role="button"\n       title="{{nextMonthLabel}}"\n       hidefocus="on">\n    </a>\n</div>\n<div class="{{getBaseCssClasses \'body\'}}">\n    <table class="{{getBaseCssClasses \'table\'}}" cellspacing="0" role="grid">\n        <thead>\n        <tr role="row">\n            {{#each weekdays}}\n            <th role="columnheader" title="{{.}}" class="{{getBaseCssClasses \'column-header\'}}">\n                <span class="{{getBaseCssClasses \'column-header-inner\'}}">\n                    {{veryShortWeekdays[xindex]}}\n                </span>\n            </th>\n            {{/each}}\n        </tr>\n        </thead>\n        <tbody id="ks-date-picker-tbody-{{id}}">\n        {{{renderDates}}}\n        </tbody>\n    </table>\n</div>\n{{#if showToday}}\n<div class="{{getBaseCssClasses \'footer\'}}">\n    <a class="{{getBaseCssClasses \'today-btn\'}}"\n       role="button"\n       hidefocus="on"\n       href="#"\n       id="ks-date-picker-today-btn-{{id}}"\n       title="{{todayTimeLabel}}">{{todayLabel}}</a>\n</div>\n{{/if}}');
KISSY.add("date/picker/render",function(k,l,b,o,m){function n(d,c){return d.get(b.YEAR)==c.get(b.YEAR)&&d.get(b.MONTH)==c.get(b.MONTH)&&d.get(b.DAY_OF_MONTH)==c.get(b.DAY_OF_MONTH)}return l.getDefaultRender().extend({getMonthYearLabel:function(){var d=this.control,c=d.get("locale"),d=d.get("value"),e=d.getLocale();return(new o(c.monthYearFormat,e)).format(d)},getTodayTimeLabel:function(){var d=this.control,c=d.get("locale"),e=d.get("value"),d=e.getLocale(),e=e.clone();e.setTimeInMillis(k.now());return(new o(c.dateFormat,
d)).format(e)},beforeCreateDom:function(d,c,e){var a=this.control,b=a.get("locale"),h=a.get("value"),a=h.getLocale();k.mix(c,{previousMonthBtn:"#ks-date-picker-previous-month-btn-{id}",monthSelectEl:"#ks-date-picker-month-select-{id}",monthSelectContentEl:"#ks-date-picker-month-select-content-{id}",nextMonthBtn:"#ks-date-picker-next-month-btn-{id}",todayBtnEl:"#ks-date-picker-today-btn-{id}",tbodyEl:"#ks-date-picker-tbody-{id}"});for(var c=[],f=[],h=h.getFirstDayOfWeek(),g=0;7>g;g++){var j=(h+g)%
7;c[g]=b.veryShortWeekdays[j];f[g]=a.weekdays[j]}k.mix(d,{monthYearLabel:this.getMonthYearLabel(),previousMonthLabel:b.previousMonth,monthSelectLabel:b.monthSelect,nextMonthLabel:b.nextMonth,weekdays:f,veryShortWeekdays:c,todayLabel:b.today,todayTimeLabel:this.getTodayTimeLabel()});e.renderDates=k.bind(this.renderDates,this)},renderDates:function(){var d,c,e=[],a,i=this.control,h=i.get("locale"),f=i.get("value"),g=f.clone(),j=this.getBaseCssClass("cell"),p=this.getBaseCssClass("date"),r=i.get("dateRender"),
l=i.get("disabledDate"),m=f.getLocale(),h=new o(h.dateFormat,m),m=this.getBaseCssClass("today"),v=this.getBaseCssClass("selected-day"),w=this.getBaseCssClass("last-month-cell"),x=this.getBaseCssClass("next-month-btn-day"),y=this.getBaseCssClass("disabled-cell");g.setTimeInMillis(k.now());c=f.clone();c.set(f.get(b.YEAR),f.get(b.MONTH),1);d=(c.get(b.DAY_OF_WEEK)+7-f.getFirstDayOfWeek())%7;var t=c.clone();t.add(b.DAY_OF_MONTH,-d);var s=0;for(d=0;6>d;d++){e[d]=[];for(c=0;7>c;c++)a=t,s&&(a=a.clone(),a.add(b.DAY_OF_MONTH,
s)),e[d][c]=a,s++}t="";for(d=0;6>d;d++){s='<tr role="row">';for(c=0;7>c;c++){a=e[d][c];var q=j;n(a,g)&&(q+=" "+m);n(a,f)&&(q+=" "+v);(a.get(b.YEAR)<f.get(b.YEAR)||a.get(b.YEAR)==f.get(b.YEAR)&&a.get(b.MONTH)<f.get(b.MONTH))&&(q+=" "+w);(a.get(b.YEAR)>f.get(b.YEAR)||a.get(b.YEAR)==f.get(b.YEAR)&&a.get(b.MONTH)>f.get(b.MONTH))&&(q+=" "+x);l&&l(a,f)&&(q+=" "+y);var u="";if(!r||!(u=r(a,f)))u=k.substitute('<a hidefocus="on" class="{cls}" href="#">{content}</a>',{cls:p,content:a.get(b.DAY_OF_MONTH)});s+=
k.substitute('<td role="gridcell" title="{title}" class="{cls}">{content}</td>',{cls:q,title:h.format(a),content:u})}t+=s+"</tr>"}i.dateTable=e;return t},_onSetValue:function(){var b=this.control,c=b.get("tbodyEl"),e=b.get("monthSelectContentEl"),b=b.get("todayBtnEl");e.html(this.getMonthYearLabel());b.attr("title",this.getTodayTimeLabel());c.html(this.renderDates())}},{name:"date-picker-render",ATTRS:{contentTpl:{value:m}}})},{requires:["component/control","date/gregorian","date/format","./picker-tpl"]});
KISSY.add("date/picker/month-panel/months-tpl",'{{#each months}}\n<tr role="row">\n    {{#each months[xindex]}}\n    <td role="gridcell"\n        title="{{title}}"\n        class="{{getBaseCssClasses \'cell\'}}\n        {{#if month===value}}\n        {{getBaseCssClasses \'selected-cell\'}}\n        {{/if}}\n        ">\n        <a hidefocus="on"\n           href="#"\n           class="{{getBaseCssClasses \'month\'}}">\n            {{content}}\n        </a>\n    </td>\n    {{/each}}\n</tr>\n{{/each}}');
KISSY.add("date/picker/month-panel/month-panel-tpl",'<div class="{{getBaseCssClasses \'header\'}}">\n    <a id="ks-date-picker-month-panel-previous-year-btn-{{id}}"\n       class="{{getBaseCssClasses \'prev-year-btn\'}}"\n       href="#"\n       role="button"\n       title="{{previousYearLabel}}"\n       hidefocus="on">\n    </a>\n\n\n        <a class="{{getBaseCssClasses \'year-select\'}}"\n           role="button"\n           href="#"\n           hidefocus="on"\n           title="{{yearSelectLabel}}"\n           id="ks-date-picker-month-panel-year-select-{{id}}">\n            <span id="ks-date-picker-month-panel-year-select-content-{{id}}">{{year}}</span>\n            <span class="{{getBaseCssClasses \'year-select-arrow\'}}">x</span>\n        </a>\n\n    <a id="ks-date-picker-month-panel-next-year-btn-{{id}}"\n       class="{{getBaseCssClasses \'next-year-btn\'}}"\n       href="#"\n       role="button"\n       title="{{nextYearLabel}}"\n       hidefocus="on">\n    </a>\n</div>\n<div class="{{getBaseCssClasses \'body\'}}">\n    <table class="{{getBaseCssClasses \'table\'}}" cellspacing="0" role="grid">\n        <tbody id="ks-date-picker-month-panel-tbody-{{id}}">\n        {{{include "date/picker/month-panel/months-tpl"}}}\n        </tbody>\n    </table>\n</div>');
KISSY.add("date/picker/month-panel/render",function(k,l,b,o,m,n){function d(c){for(var e=c.get("value"),a=e.get(b.MONTH),d=e.clone(),h=c.get("locale").monthYearFormat,f=e.getLocale(),h=new o(h,f),g=[],f=f.shortMonths,j=0,p=0;3>p;p++){g[p]=[];for(var r=0;4>r;r++)d.set(b.MONTH,j),g[p][r]={value:j,content:f[j],title:h.format(d)},j++}k.mix(c.view.renderData,{months:g,year:e.get(b.YEAR),month:a});return c.months=g}return l.getDefaultRender().extend({beforeCreateDom:function(c,b){var a=this.control,i=a.get("locale");
k.mix(c,{yearSelectLabel:i.yearSelect,previousYearLabel:i.previousYear,nextYearLabel:i.nextYear});k.mix(b,{tbodyEl:"#ks-date-picker-month-panel-tbody-{id}",previousYearBtn:"#ks-date-picker-month-panel-previous-year-btn-{id}",yearSelectEl:"#ks-date-picker-month-panel-year-select-{id}",yearSelectContentEl:"#ks-date-picker-month-panel-year-select-content-{id}",nextYearBtn:"#ks-date-picker-month-panel-next-year-btn-{id}"});d(a)},_onSetValue:function(c){var e=this.control;d(e);e.get("tbodyEl").html(this.renderTpl(m));
e.get("yearSelectContentEl").html(c.get(b.YEAR))}},{ATTRS:{contentTpl:{value:n}}})},{requires:["component/control","date/gregorian","date/format","./months-tpl","./month-panel-tpl"]});KISSY.add("date/picker/year-panel/years-tpl",'{{#each years}}\n<tr role="row">\n    {{#each years[xindex]}}\n    <td role="gridcell"\n        title="{{title}}"\n        class="{{getBaseCssClasses \'cell\'}}\n        {{#if content===year}}\n         {{getBaseCssClasses \'selected-cell\'}}\n        {{/if}}\n        {{#if content<startYear}}\n         {{getBaseCssClasses \'last-decade-cell\'}}\n        {{/if}}\n        {{#if content>endYear}}\n         {{getBaseCssClasses \'next-decade-cell\'}}\n        {{/if}}\n        ">\n        <a hidefocus="on"\n           href="#"\n           class="{{getBaseCssClasses \'year\'}}">\n            {{content}}\n        </a>\n    </td>\n    {{/each}}\n</tr>\n{{/each}}');
KISSY.add("date/picker/year-panel/year-panel-tpl",'<div class="{{getBaseCssClasses \'header\'}}">\n    <a id="ks-date-picker-year-panel-previous-decade-btn-{{id}}"\n       class="{{getBaseCssClasses \'prev-decade-btn\'}}"\n       href="#"\n       role="button"\n       title="{{previousDecadeLabel}}"\n       hidefocus="on">\n    </a>\n\n    <a class="{{getBaseCssClasses \'decade-select\'}}"\n       role="button"\n       href="#"\n       hidefocus="on"\n       title="{{decadeSelectLabel}}"\n       id="ks-date-picker-year-panel-decade-select-{{id}}">\n            <span id="ks-date-picker-year-panel-decade-select-content-{{id}}">\n                {{startYear}}-{{endYear}}\n            </span>\n        <span class="{{getBaseCssClasses \'decade-select-arrow\'}}">x</span>\n    </a>\n\n    <a id="ks-date-picker-year-panel-next-decade-btn-{{id}}"\n       class="{{getBaseCssClasses \'next-decade-btn\'}}"\n       href="#"\n       role="button"\n       title="{{nextDecadeLabel}}"\n       hidefocus="on">\n    </a>\n</div>\n<div class="{{getBaseCssClasses \'body\'}}">\n    <table class="{{getBaseCssClasses \'table\'}}" cellspacing="0" role="grid">\n        <tbody id="ks-date-picker-year-panel-tbody-{{id}}">\n        {{{include "date/picker/year-panel/years-tpl"}}}\n        </tbody>\n    </table>\n</div>');
KISSY.add("date/picker/year-panel/render",function(k,l,b,o,m,n){function d(c){for(var e=c.get("value"),a=e.get(b.YEAR),a=10*parseInt(a/10)-1,d=e.clone(),h=c.get("locale").yearFormat,e=e.getLocale(),e=new o(h,e),h=[],f=0,g=0;3>g;g++){h[g]=[];for(var j=0;4>j;j++)d.set(b.YEAR,a+f),h[g][j]={content:a+f,title:e.format(d)},f++}return c.years=h}return l.getDefaultRender().extend({beforeCreateDom:function(c,e){var a=this.control,i=a.get("value"),h=i.get(b.YEAR),h=10*parseInt(h/10),f=h+9,g=a.get("locale");
k.mix(c,{decadeSelectLabel:g.decadeSelect,years:d(a),startYear:h,endYear:f,year:i.get(b.YEAR),previousDecadeLabel:g.previousDecade,nextDecadeLabel:g.nextDecade});k.mix(e,{tbodyEl:"#ks-date-picker-year-panel-tbody-{id}",previousDecadeBtn:"#ks-date-picker-year-panel-previous-decade-btn-{id}",decadeSelectEl:"#ks-date-picker-year-panel-decade-select-{id}",decadeSelectContentEl:"#ks-date-picker-year-panel-decade-select-content-{id}",nextDecadeBtn:"#ks-date-picker-year-panel-next-decade-btn-{id}"})},_onSetValue:function(c){var e=
this.control,a=c.get(b.YEAR),a=10*parseInt(a/10),i=a+9;k.mix(this.renderData,{startYear:a,endYear:i,years:d(e),year:c.get(b.YEAR)});e.get("tbodyEl").html(this.renderTpl(m));e.get("decadeSelectContentEl").html(a+"-"+i)}},{ATTRS:{contentTpl:{value:n}}})},{requires:["component/control","date/gregorian","date/format","./years-tpl","./year-panel-tpl"]});KISSY.add("date/picker/decade-panel/decades-tpl",'{{#each decades}}\n<tr role="row">\n    {{#each decades[xindex]}}\n    <td role="gridcell"\n        class="{{getBaseCssClasses \'cell\'}}\n        {{#if startDecade<=year&&year<=endDecade}}\n         {{getBaseCssClasses \'selected-cell\'}}\n        {{/if}}\n        {{#if startDecade<startYear}}\n         {{getBaseCssClasses \'last-century-cell\'}}\n        {{/if}}\n        {{#if endDecade>endYear}}\n         {{getBaseCssClasses \'next-century-cell\'}}\n        {{/if}}\n        ">\n        <a hidefocus="on"\n           href="#"\n           class="{{getBaseCssClasses \'decade\'}}">\n            {{startDecade}}-{{endDecade}}\n        </a>\n    </td>\n    {{/each}}\n</tr>\n{{/each}}');
KISSY.add("date/picker/decade-panel/decade-panel-tpl",'<div class="{{getBaseCssClasses \'header\'}}">\n    <a id="ks-date-picker-decade-panel-previous-century-btn-{{id}}"\n       class="{{getBaseCssClasses \'prev-century-btn\'}}"\n       href="#"\n       role="button"\n       title="{{previousCenturyLabel}}"\n       hidefocus="on">\n    </a>\n    <div class="{{getBaseCssClasses \'century\'}}"\n         id="ks-date-picker-decade-panel-century-{{id}}">\n                {{startYear}}-{{endYear}}\n    </div>\n    <a id="ks-date-picker-decade-panel-next-century-btn-{{id}}"\n       class="{{getBaseCssClasses \'next-century-btn\'}}"\n       href="#"\n       role="button"\n       title="{{nextCenturyLabel}}"\n       hidefocus="on">\n    </a>\n</div>\n<div class="{{getBaseCssClasses \'body\'}}">\n    <table class="{{getBaseCssClasses \'table\'}}" cellspacing="0" role="grid">\n        <tbody id="ks-date-picker-decade-panel-tbody-{{id}}">\n        {{{include "date/picker/decade-panel/decades-tpl"}}}\n        </tbody>\n    </table>\n</div>');
KISSY.add("date/picker/decade-panel/render",function(k,l,b,o,m,n){function d(c,d){var a=c.get("value").get(b.YEAR),i=100*parseInt(a/100),h=i-10,f=i+99;c.get("locale");for(var g=[],j=0,p=0;3>p;p++){g[p]=[];for(var r=0;4>r;r++)g[p][r]={startDecade:h+10*j,endDecade:h+10*j+9},j++}c.decades=g;k.mix(d.renderData,{startYear:i,endYear:f,year:a,decades:g})}return l.getDefaultRender().extend({beforeCreateDom:function(b,e){var a=this.control;a.get("value");var i=a.get("locale");d(a,this);k.mix(b,{previousCenturyLabel:i.previousCentury,
nextCenturyLabel:i.nextCentury});k.mix(e,{tbodyEl:"#ks-date-picker-decade-panel-tbody-{id}",previousCenturyBtn:"#ks-date-picker-decade-panel-previous-century-btn-{id}",centuryEl:"#ks-date-picker-decade-panel-century-{id}",nextCenturyBtn:"#ks-date-picker-decade-panel-next-century-btn-{id}"})},_onSetValue:function(){var b=this.control;d(b,this);var e=this.renderData.startYear,a=this.renderData.endYear;b.get("tbodyEl").html(this.renderTpl(m));b.get("centuryEl").html(e+"-"+a)}},{ATTRS:{contentTpl:{value:n}}})},
{requires:["component/control","date/gregorian","date/format","./decades-tpl","./decade-panel-tpl"]});
KISSY.add("date/picker/decade-panel/control",function(k,l,b,o,m){function n(a,c){var d=a.get("value").clone();d.add(b.YEAR,c);a.set("value",d)}function d(b){b.preventDefault();n(this,100)}function c(b){b.preventDefault();n(this,-100)}function e(a){a.preventDefault();var a=i(a.currentTarget),c=a.parent(),a=a.index(),c=c.index(),d=this.get("value").clone(),j=d.get(b.YEAR)%10;d.set(b.YEAR,this.decades[c][a].startDecade+j);this.set("value",d);this.fire("select",{value:d})}var a=l.Gesture.tap,i=l.all;
return o.extend({bindUI:function(){this.get("nextCenturyBtn").on(a,d,this);this.get("previousCenturyBtn").on(a,c,this);this.get("tbodyEl").delegate(a,"."+this.view.getBaseCssClass("cell"),e,this)}},{xclass:"date-picker-decade-panel",ATTRS:{value:{view:1},xrender:{value:m}}})},{requires:["node","date/gregorian","component/control","./render"]});
KISSY.add("date/picker/year-panel/control",function(k,l,b,o,m,n){function d(j,a){var c=j.get("value").clone();c.add(b.YEAR,a);j.set("value",c)}function c(b){b.preventDefault();d(this,10)}function e(b){b.preventDefault();d(this,-10)}function a(a){a.preventDefault();var a=g(a.currentTarget),c=a.parent(),a=a.index(),c=c.index(),d=this.get("value").clone();d.set(b.YEAR,this.years[c][a].content);this.set("value",d);this.fire("select",{value:d})}function i(a){a.preventDefault();a=this.get("decadePanel");
a.set("value",this.get("value"));a.show()}function h(a){this.set("value",a.value);this.get("decadePanel").hide()}var f=l.Gesture.tap,g=l.all;return o.extend({bindUI:function(){this.get("nextDecadeBtn").on(f,c,this);this.get("previousDecadeBtn").on(f,e,this);this.get("tbodyEl").delegate(f,"."+this.view.getBaseCssClass("cell"),a,this);this.get("decadeSelectEl").on(f,i,this)}},{xclass:"date-picker-year-panel",ATTRS:{value:{view:1},decadePanel:{valueFn:function(){var a=new n({locale:this.get("locale"),
render:this.get("el")});a.on("select",h,this);return a}},xrender:{value:m}}})},{requires:["node","date/gregorian","component/control","./render","../decade-panel/control"]});
KISSY.add("date/picker/month-panel/control",function(k,l,b,o,m,n){function d(a,c){var d=a.get("value").clone();d.add(b.YEAR,c);a.set("value",d)}function c(a){a.preventDefault();d(this,1)}function e(a){a.preventDefault();d(this,-1)}function a(a){a.preventDefault();var a=g(a.currentTarget),c=a.parent(),a=a.index(),c=c.index(),d=this.get("value").clone();d.set(b.MONTH,4*c+a);this.fire("select",{value:d})}function i(a){a.preventDefault();a=this.get("yearPanel");a.set("value",this.get("value"));a.show()}
function h(a){this.set("value",a.value);this.get("yearPanel").hide()}var f=l.Gesture.tap,g=l.all;return o.extend({bindUI:function(){this.get("nextYearBtn").on(f,c,this);this.get("previousYearBtn").on(f,e,this);this.get("tbodyEl").delegate(f,"."+this.view.getBaseCssClass("cell"),a,this);this.get("yearSelectEl").on(f,i,this)}},{xclass:"date-picker-month-panel",ATTRS:{value:{view:1},yearPanel:{valueFn:function(){var a=new n({locale:this.get("locale"),render:this.get("el")});a.on("select",h,this);return a}},
xrender:{value:m}}})},{requires:["node","date/gregorian","component/control","./render","../year-panel/control"]});
KISSY.add("date/picker/control",function(k,l,b,o,m,n,d){function c(a,c){var d=a.get("value").clone();d.add(b.MONTH,c);a.set("value",d)}function e(a){a.preventDefault();c(this,1)}function a(a){a.preventDefault();c(this,-1)}function i(a){a.preventDefault();var b=p(a.currentTarget);b.hasClass(this.view.getBaseCssClass("disabled-cell"))||(a=b.parent(),b=b.index(),this.set("value",this.dateTable[a.index()][b]))}function h(a){a.preventDefault();a=this.get("monthPanel");a.set("value",this.get("value"));
a.show()}function f(a){this.set("value",a.value);this.get("monthPanel").hide()}function g(a){a.preventDefault();a=this.get("value").clone();a.setTimeInMillis(k.now());this.set("value",a)}var j=l.Gesture.tap,p=l.all;return m.extend({bindUI:function(){this.get("nextMonthBtn").on(j,e,this);this.get("previousMonthBtn").on(j,a,this);this.get("tbodyEl").delegate(j,"."+this.view.getBaseCssClass("cell"),i,this);this.get("monthSelectEl").on(j,h,this);this.get("todayBtnEl").on(j,g,this)}},{xclass:"date-picker",
ATTRS:{value:{view:1,valueFn:function(){var a=new b;a.setTimeInMillis(k.now());return a}},previousMonthBtn:{},monthSelectEl:{},monthPanel:{valueFn:function(){var a=new d({locale:this.get("locale"),render:this.get("el")});a.on("select",f,this);return a}},nextMonthBtn:{},tbodyEl:{},todayBtnEl:{},dateRender:{},disabledDate:{},locale:{value:o},showToday:{view:1,value:!0},xrender:{value:n}}})},{requires:"node,date/gregorian,i18n!date/picker,component/control,./render,./month-panel/control".split(",")});
KISSY.add("date/picker",function(k,l){return l},{requires:["./picker/control"]});
