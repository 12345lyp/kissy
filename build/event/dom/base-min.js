/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jul 23 22:55
*/
KISSY.add("event/dom/base/utils",function(d,f){var a="ksEventTargetId_"+d.now(),b=d.Env.host.document;return{simpleAdd:b&&b.addEventListener?function(a,b,f,d){a.addEventListener&&a.addEventListener(b,f,!!d)}:function(a,b,f){a.attachEvent&&a.attachEvent("on"+b,f)},simpleRemove:b&&b.removeEventListener?function(a,b,f,d){a.removeEventListener&&a.removeEventListener(b,f,!!d)}:function(a,b,f){a.detachEvent&&a.detachEvent("on"+b,f)},data:function(b,d){return f.data(b,a,d)},removeData:function(b){return f.removeData(b,
a)}}},{requires:["dom"]});KISSY.add("event/dom/base/special",function(){return{}});
KISSY.add("event/dom/base/observer",function(d,f,a){function b(a){b.superclass.constructor.apply(this,arguments)}d.extend(b,a.Observer,{keys:"fn,filter,data,context,originalType,groups,last".split(","),notifyInternal:function(a,b){var d,i,p=a.type,m;(m=this.originalType)?a.type=m:m=p;(d=f[m])&&d.handle?(d=d.handle(a,this,b))&&0<d.length&&(i=d[0]):i=this.simpleNotify(a,b);a.type=p;return i}});return b},{requires:["./special","event/base"]});
KISSY.add("event/dom/base/object",function(d,f,a){function b(){return i}function o(){return p}function l(c){var j=c.type;l.superclass.constructor.call(this);this.originalEvent=c;this.isDefaultPrevented=c.defaultPrevented||c.returnValue===p||c.getPreventDefault&&c.getPreventDefault()?b:o;var g=[],e,k,h=m.concat();d.each(n,function(c){j.match(c.reg)&&(h=h.concat(c.props),c.fix&&g.push(c.fix));return a});for(k=h.length;k;)e=h[--k],this[e]=c[e];this.target||(this.target=c.srcElement||s);3===this.target.nodeType&&
(this.target=this.target.parentNode);for(k=g.length;k;)e=g[--k],e(this,c)}var s=d.Env.host.document,i=!0,p=!1,m="altKey,bubbles,cancelable,ctrlKey,currentTarget,eventPhase,metaKey,shiftKey,target,timeStamp,view,type".split(","),n=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(c,j){null==c.which&&(c.which=null!=j.charCode?j.charCode:j.keyCode);c.metaKey===a&&(c.metaKey=c.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^gesturechange$/i,
props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(c,j){var g,e,m,h=j.wheelDelta,b=j.axis,n=j.wheelDeltaY,d=j.wheelDeltaX,f=j.detail;h&&(m=h/120);f&&(m=-(0==f%3?f/3:f));b!==a&&(b===c.HORIZONTAL_AXIS?(e=0,g=-1*m):b===c.VERTICAL_AXIS&&(g=0,e=m));n!==a&&(e=n/120);d!==a&&(g=-1*d/120);!g&&!e&&(e=m);g!==a&&(c.deltaX=g);e!==a&&(c.deltaY=e);m!==a&&(c.delta=m)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:"buttons,clientX,clientY,button,offsetX,relatedTarget,which,fromElement,toElement,offsetY,pageX,pageY,screenX,screenY".split(","),
fix:function(c,m){var g,e,b=c.target,h=m.button;null==c.pageX&&null!=m.clientX&&(g=b.ownerDocument||s,e=g.documentElement,g=g.body,c.pageX=m.clientX+(e&&e.scrollLeft||g&&g.scrollLeft||0)-(e&&e.clientLeft||g&&g.clientLeft||0),c.pageY=m.clientY+(e&&e.scrollTop||g&&g.scrollTop||0)-(e&&e.clientTop||g&&g.clientTop||0));!c.which&&h!==a&&(c.which=h&1?1:h&2?3:h&4?2:0);!c.relatedTarget&&c.fromElement&&(c.relatedTarget=c.fromElement===b?c.toElement:c.fromElement);return c}}];d.extend(l,f.Object,{constructor:l,
preventDefault:function(){var a=this.originalEvent;a.preventDefault?a.preventDefault():a.returnValue=p;l.superclass.preventDefault.call(this)},stopPropagation:function(){var a=this.originalEvent;a.stopPropagation?a.stopPropagation():a.cancelBubble=i;l.superclass.stopPropagation.call(this)}});return l},{requires:["event/base"]});
KISSY.add("event/dom/base/observable",function(d,f,a,b,o,l,s){function i(a){d.mix(this,a);this.reset()}var p=s.Utils;d.extend(i,s.Observable,{setup:function(){var m=this.type,n=a[m]||{},c=this.currentTarget,j=b.data(c).handle;(!n.setup||!1===n.setup.call(c,m))&&b.simpleAdd(c,m,j)},constructor:i,reset:function(){i.superclass.reset.call(this);this.lastCount=this.delegateCount=0},notify:function(a){var b=a.target,c=a.type,j=this.currentTarget,g=this.observers,e=[],k,h,d=this.delegateCount||0,r,t;if(d&&
b.nodeType)for(;b!=j;){if(!0!==b.disabled||"click"!==c){var q={},l,i,o;r=[];for(h=0;h<d;h++)t=g[h],o=t.filter,i=o+"",l=q[i],void 0===l&&(l=q[i]=f.test(b,o)),l&&r.push(t);r.length&&e.push({currentTarget:b,currentTargetObservers:r})}b=b.parentNode||j}d<g.length&&e.push({currentTarget:j,currentTargetObservers:g.slice(d)});h=0;for(b=e.length;!a.isPropagationStopped()&&h<b;++h){c=e[h];r=c.currentTargetObservers;c=c.currentTarget;a.currentTarget=c;for(c=0;!a.isImmediatePropagationStopped()&&c<r.length;c++)j=
r[c],j=j.notify(a,this),!1!==k&&(k=j)}return k},fire:function(b,n){var b=b||{},c=""+this.type,j,g,e=a[c]||{};j=!1!==e.bubbles;var k=this.currentTarget;if(!(e.fire&&!1===e.fire.call(k,n))&&(b instanceof l||(g=b,b=new l({currentTarget:k,type:c,target:k}),d.mix(b,g)),!(e.preFire&&!1===e.preFire.call(k,b,n)))){var h=k,u=f.getWindow(h),r=u.document;g=[];e=0;do g.push(h),h=h.parentNode||h.ownerDocument||h===r&&u;while(!n&&h&&j);h=g[e];do b.currentTarget=h,(j=i.getDomEventObservable(h,c))&&j.notify(b),h=
g[++e];while(!n&&h&&!b.isPropagationStopped());if(!n&&!b.isDefaultPrevented()){try{k[c]&&!d.isWindow(k)&&(i.triggeredEvent=c,k[c]())}catch(t){}i.triggeredEvent=""}}},on:function(b){var d=this.observers,c=a[this.type]||{},b=b instanceof o?b:new o(b);-1==this.findObserver(b)&&(b.filter?(d.splice(this.delegateCount,0,b),this.delegateCount++):b.last?(d.push(b),this.lastCount++):d.splice(d.length-this.lastCount,0,b),c.add&&c.add.call(this.currentTarget,b))},detach:function(b){var d,c=a[this.type]||{},
j="filter"in b,g=b.filter,e=b.context,k=b.fn,h=this.currentTarget,f=this.observers,b=b.groups;if(f.length){b&&(d=p.getGroupsRe(b));var r,l,q,i,o=f.length;if(k||j||d){e=e||h;r=b=0;for(l=[];b<o;++b)q=f[b],i=q.context||h,e!=i||k&&k!=q.fn||j&&(g&&g!=q.filter||!g&&!q.filter)||d&&!q.groups.match(d)?l[r++]=q:(q.filter&&this.delegateCount&&this.delegateCount--,q.last&&this.lastCount&&this.lastCount--,c.remove&&c.remove.call(h,q));this.observers=l}else this.reset();this.checkMemory()}},checkMemory:function(){var f=
this.type,l,c,j=a[f]||{},g=this.currentTarget,e=b.data(g);if(e&&(l=e.observables,this.hasObserver()||(c=e.handle,(!j.tearDown||!1===j.tearDown.call(g,f))&&b.simpleRemove(g,f,c),delete l[f]),d.isEmptyObject(l)))e.handle=null,b.removeData(g)}});i.triggeredEvent="";i.getDomEventObservable=function(a,d){var c=b.data(a),j;c&&(j=c.observables);return j?j[d]:null};i.getDomEventObservablesHolder=function(a,d){var c=b.data(a);!c&&d&&b.data(a,c={});return c};return i},{requires:"dom,./special,./utils,./observer,./object,event/base".split(",")});
KISSY.add("event/dom/base/dom-event",function(d,f,a,b,o,l,s){function i(a,b){var c=o[b]||{},d;if(!a.originalType&&(d=c.typeFix))a.originalType=b,b=d;return b}function p(a,b,c){var k,h,f,c=d.merge(c),b=i(c,b);k=l.getDomEventObservablesHolder(a,1);if(!(f=k.handle))f=k.handle=function(a){var b=a.type,c=f.currentTarget;if(!(l.triggeredEvent==b||"undefined"==typeof KISSY))if(b=l.getDomEventObservable(c,b))return a.currentTarget=c,a=new s(a),b.notify(a)},f.currentTarget=a;if(!(h=k.observables))h=k.observables=
{};k=h[b];k||(k=h[b]=new l({type:b,currentTarget:a}),k.setup());k.on(c);a=null}function m(a,b,c){var c=d.merge(c),b=i(c,b),a=l.getDomEventObservablesHolder(a),f=(a||{}).observables;if(a&&f)if(b)(b=f[b])&&b.detach(c);else for(b in f)f[b].detach(c)}var n=f.Utils,c={};d.mix(c,{on:function(a,c,e,d){a=b.query(a);n.batchForType(function(a,b,c,e){for(var c=n.normalizeParam(b,c,e),d,b=c.type,e=a.length-1;0<=e;e--)d=a[e],p(d,b,c)},1,a,c,e,d);return a},detach:function(a,c,e,d){a=b.query(a);n.batchForType(function(a,
b,c,e){for(var c=n.normalizeParam(b,c,e),d,f,b=c.type,e=a.length-1;0<=e;e--)if(d=a[e],m(d,b,c),c.deep&&d.getElementsByTagName){f=d.getElementsByTagName("*");for(d=f.length-1;0<=d;d--)m(f[d],b,c)}},1,a,c,e,d);return a},delegate:function(a,b,e,d,h){return c.on(a,b,{fn:d,context:h,filter:e})},undelegate:function(a,b,d,f,h){return c.detach(a,b,{fn:f,context:h,filter:d})},fire:function(a,c,d,f){var h=void 0,d=d||{};d.synthetic=1;n.splitAndRun(c,function(c){var g,i,m;n.fillGroupsForEvent(c,d);c=d.type;
if((i=o[c])&&i.typeFix)c=i.typeFix;a=b.query(a);for(i=a.length-1;0<=i;i--)g=a[i],m=l.getDomEventObservable(g,c),!f&&!m&&(m=new l({type:c,currentTarget:g})),m&&(g=m.fire(d,f),!1!==h&&(h=g))});return h},fireHandler:function(a,b,d){return c.fire(a,b,d,1)},clone:function(b,c){var e;if(e=l.getDomEventObservablesHolder(b)){var f=a.data(b);f&&f===a.data(c)&&a.removeData(c);d.each(e.observables,function(a,b){d.each(a.observers,function(a){p(c,b,a)})})}}});return c},{requires:"event/base,./utils,dom,./special,./observable,./object".split(",")});
KISSY.add("event/dom/base/key-codes",function(d){var f=d.UA,a={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,
Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,
WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(b){if(b.altKey&&!b.ctrlKey||b.metaKey||b.keyCode>=a.F1&&b.keyCode<=a.F12)return!1;switch(b.keyCode){case a.ALT:case a.CAPS_LOCK:case a.CONTEXT_MENU:case a.CTRL:case a.DOWN:case a.END:case a.ESC:case a.HOME:case a.INSERT:case a.LEFT:case a.MAC_FF_META:case a.META:case a.NUMLOCK:case a.NUM_CENTER:case a.PAGE_DOWN:case a.PAGE_UP:case a.PAUSE:case a.PRINT_SCREEN:case a.RIGHT:case a.SHIFT:case a.UP:case a.WIN_KEY:case a.WIN_KEY_RIGHT:return!1;
default:return!0}},isCharacterKey:function(b){if(b>=a.ZERO&&b<=a.NINE||b>=a.NUM_ZERO&&b<=a.NUM_MULTIPLY||b>=a.A&&b<=a.Z||f.webkit&&0==b)return!0;switch(b){case a.SPACE:case a.QUESTION_MARK:case a.NUM_PLUS:case a.NUM_MINUS:case a.NUM_PERIOD:case a.NUM_DIVISION:case a.SEMICOLON:case a.DASH:case a.EQUALS:case a.COMMA:case a.PERIOD:case a.SLASH:case a.APOSTROPHE:case a.SINGLE_QUOTE:case a.OPEN_SQUARE_BRACKET:case a.BACKSLASH:case a.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};return a});
KISSY.add("event/dom/base/gesture",function(){return{start:"mousedown",move:"mousemove",end:"mouseup",tap:"click",doubleTap:"dblclick"}});
KISSY.add("event/dom/base/special-events",function(d,f,a){var b=b;return d.mix(a,{mousewheel:{typeFix:d.UA.gecko?"DOMMouseScroll":"mousewheel"},load:{bubbles:!1},click:{fire:function(a){return!a&&"checkbox"===""+this.type&&this.click&&"input"==this.nodeName.toLowerCase()?(this.click(),!1):b}},focus:{bubbles:!1,preFire:function(a,b){b||f.fire(this,"focusin")},fire:function(a){return!a&&this.ownerDocument&&this!==this.ownerDocument.activeElement&&this.focus?(this.focus(),!1):b}},blur:{bubbles:!1,preFire:function(a,
b){b||f.fire(this,"focusout")},fire:function(a){return!a&&this.ownerDocument&&this===this.ownerDocument.activeElement&&this.blur?(this.blur(),!1):b}}})},{requires:["./dom-event","./special"]});
KISSY.add("event/dom/base/mouseenter",function(d,f,a){d.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(b){a[b.name]={typeFix:b.fix,handle:function(a,b,d){var i=a.currentTarget,p=a.relatedTarget;if(!p||p!==i&&!f.contains(i,p))return[b.simpleNotify(a,d)]}}})},{requires:["dom","./special"]});
KISSY.add("event/dom/base/valuechange",function(d,f,a,b){function o(b){if(a.hasData(b,e)){var c=a.data(b,e);clearTimeout(c);a.removeData(b,e)}}function l(a){o(a.target)}function s(b){var d=b.value,e=a.data(b,g);d!==e&&(f.fireHandler(b,c,{prevVal:e,newVal:d}),a.data(b,g,d))}function i(b){a.hasData(b,e)||a.data(b,e,setTimeout(function(){s(b);a.data(b,e,setTimeout(arguments.callee,k))},k))}function p(b){var c=b.target;"focus"==b.type&&a.data(c,g,c.value);i(c)}function m(a){s(a.target)}function n(b){a.removeData(b,
g);o(b);f.detach(b,"blur",l);f.detach(b,"webkitspeechchange",m);f.detach(b,"mousedown keyup keydown focus",p)}var c="valuechange",j=a.nodeName,g="event/valuechange/history",e="event/valuechange/poll",k=50;b[c]={setup:function(){var a=j(this);if("input"==a||"textarea"==a)n(this),f.on(this,"blur",l),f.on(this,"webkitspeechchange",m),f.on(this,"mousedown keyup keydown focus",p)},tearDown:function(){n(this)}};return f},{requires:["./dom-event","dom","./special"]});
KISSY.add("event/dom/base",function(d,f,a,b,o,l){return d.merge({add:f.on,remove:f.detach,KeyCode:b,Gesture:o,Special:l,Object:a},f)},{requires:"./base/dom-event,./base/object,./base/key-codes,./base/gesture,./base/special-events,./base/mouseenter,./base/valuechange".split(",")});
